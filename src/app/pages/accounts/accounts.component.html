<style>
  .text-green {
    color: green
  }

  .text-red {
    color: red;
  }

  .text-bold {
    font-size: 15px;
    font-weight: bolder
  }

  .text-normal {
    font-size: 14px;
    font-weight: normal
  }

  h5{
    color:rgb(40, 116, 216);
    /* font-family:fantasy; */
    font-size: 15px

  }
</style>
<div class="row">
  <div class="col-md-12">
    <div class="pull-right">
      <button type="button" class="btn btn-primary" (click)="openModalExpense(templateExpense)" style="font-size:15px">
        Expense &nbsp;/&nbsp;
        <b>اندراج خرچ</b>
      </button>
      <button class="btn btn-primary" (click)="openModalIncome(templateIncome)" style="font-size:15px">
        Income &nbsp;/&nbsp;
        <b>اندراج آمدن</b>
      </button>
    </div>
  </div>
</div>
<div class="row" style="margin-top:15px">
  <div class="col-md-12 col-sm-12">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Sr #</th>
          <th>Account #</th>
          <th>Name</th>
          <th>Contact</th>
          <th>Image</th>
          <th>CNIC</th>
          <th>Address</th>
          <th>Balance</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let account of allAccounts; let i=index">
          <td>{{i+1}}</td>
          <td>{{account.Number}}</td>
          <td>{{account.Name}}</td>
          <td>{{account.MobileNumber}}</td>
          <td>
            <img src="http://{{ip}}:{{port}}/{{account.image}} " width="40" height="40" alt="" style="border-radius: 50%;"> </td>
          <td>{{account.CNIC}}</td>
          <td>{{account.Address}}</td>
          <td [ngClass]="account.Balance>=0 ? 'text-green': 'text-red'">{{account.Balance |number}}</td>
          <td>
            <a href="#" class="pull-right" data-toggle="modal" (click)="getTransactionsByAccountId(account.Id)" data-target="#TransactionModal"
              style="font-size:15px; font-weight:bolder; text-decoration: none;height:100%;width:100%">
              History Log &nbsp;/&nbsp;
              <b>تفصیل کھاتہ</b>
            </a>


          </td>
          <a href="http://{{ip}}:{{port}}/api/account/DownloadLogPDF/{{account.Id}}" class="pull-right btn btn-info btn-sm" style="font-size:12px; font-weight:bolder; text-decoration: none;height:100%;width:100%">
            Print</a>



        </tr>
      </tbody>
    </table>
  </div>
</div>

<ng-template #templateExpense>
  <div class="modal-header">
    <h4 class="modal-title pull-left">
      Expense&nbsp;/&nbsp;
      <b>اندراج خرچ</b>
    </h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRefExpense.hide()">
      <span aria-hidden="true" style="display: inline-block; padding: 0 5px">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <app-expense></app-expense>
  </div>
</ng-template>

<ng-template #templateIncome>
  <div class="modal-header">
    <h4 class="modal-title pull-left" style="font-size:25px">
      Income&nbsp;/&nbsp;
      <b>اندراج آمدن</b>
    </h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRefIncome.hide()">
      <span aria-hidden="true" style="display: inline-block; padding: 0 5px">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <app-income></app-income>
  </div>
</ng-template>



<!--history Modal -->
<div class="modal fade" id="TransactionModal" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" style="display: inline-block; padding: 0 5px">&times;</button>
        <h4 class="modal-title">
          History Log&nbsp;/&nbsp;
          <b>تفصیل کھاتہ</b>
        </h4>
      </div>
      <div class="modal-body">
        <ng-template #no_data_templ>
          No data found...
        </ng-template>
        <div *ngIf="singleUser" class="row">
         
          <div class="col-md-8">
              <h5>Account number:&nbsp;&nbsp; {{singleUser.Number}}</h5>
              <h5>Name:&nbsp;&nbsp; {{singleUser.Name}}</h5>
              <h5>Contact:&nbsp;&nbsp; {{singleUser.MobileNumber}}</h5>
              <h5>Address:&nbsp;&nbsp; {{singleUser.Address}}</h5>
              <h5>Balance:&nbsp;&nbsp; {{singleUser.Balance |number}}</h5>
              
              
          </div>
          <div class="col-md-4" >
              <img src="http://{{ip}}:{{port}}/{{singleUser.image}} " width="150" height="150" alt="" >    
          </div>
       
        </div>

        <table class="table table-striped" *ngIf="selectedAccountTransactions?.length;else no_data_templ">


          <thead>
            <tr>
              <th>Sr#</th>
              <th>Date</th>
              <th>Description</th>
              <th>Income</th>
              <th>Expense</th>
              <th>Balance</th>
            </tr>
          </thead>
          <tbody>

            <tr *ngFor="let u of selectedAccountTransactions;let i=index; let last=last">
              <td>{{i+1}}</td>
              <td>{{u.Date}}</td>
              <td>{{u.Description}}</td>
              <td *ngIf="u.Amount>0;else income" style="color:green">{{u.Amount |number}}</td>
              <ng-template #income>
                <td style="color:red;font-style:bold"></td>
              </ng-template>
              <td *ngIf="u.Amount<0;else expense" style="color:red">{{u.Amount |number}}</td>
              <ng-template #expense>
                <td style="color:green;font-style:bold"></td>
              </ng-template>
              <td [ngClass]="last ? 'text-bold': 'text-normal'">{{ getRowTotalUsingIndex(i) }}</td>
            </tr>

          </tbody>

        </table>


      </div>

    </div>

  </div>
</div>
<!-- history Modal end -->